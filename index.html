<!DOCTYPE html>
 <html>
 
   <head>
     <title>Streetex</title>
     <script src="https://unpkg.com/maplibre-gl@^5.4.0/dist/maplibre-gl.js"></script>
     <link href="https://unpkg.com/maplibre-gl@^5.4.0/dist/maplibre-gl.css" rel="stylesheet" />
     <link rel="stylesheet" href="styles.css">
</head>
 
<body>
<div id="map"></div>
<script>
    let map = new maplibregl.Map({
        container: 'map', // container id
        style: 'style2.json', // style URL
        center: [10.482593, 59.416571], // starting position [lng, lat]
        zoom: 16, // starting zoom
        pitch: 70,
        maxPitch: 80,
        bearing: 0

    });

    let userMarker = null;

    // Track user location
    if ('geolocation' in navigator) {
      navigator.geolocation.watchPosition(
        (position) => {
          const lng = position.coords.longitude;
          const lat = position.coords.latitude;

          // If marker doesn't exist, create it
          if (!userMarker) {
            userMarker = new maplibregl.Marker({ color: 'blue' })
              .setLngLat([lng, lat])
              .addTo(map);
          } else {
            // Move the marker
            userMarker.setLngLat([lng, lat]);
          }

          // Optionally, center the map on user each time
          map.setCenter([lng, lat]);
        },
        (err) => {
          console.error('Geolocation error:', err);
        },
        {
          enableHighAccuracy: true,
          maximumAge: 0,
          timeout: 5000
        }
      );
    } else {
      alert("Geolocation is not supported by your browser.");
    }

</script>
</body>